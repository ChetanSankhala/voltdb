<project xmlns:jacoco="antlib:org.jacoco.ant" name="Example Ant Build with JaCoCo" default="report">
    <description>
        Example Ant build file that demonstrates how a JaCoCo coverage report can be itegrated into an existing build in three simple steps.
    </description>

<!--  1: Import JaCoCo Ant tasks  -->
    <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
        <classpath path="third_party/java/jars/jacocoant.jar"/>
    </taskdef>

<target name="report">
    <jacoco:report>
                            
        <executiondata>
            <file file="jacoco.exec"/>
        </executiondata>
                            
        <structure name="Example Project">
            <classfiles>
                <fileset dir="obj/release/prod/org">
                    <!-- <include name="*voltdb.*"/>  -->
                    <!-- <include name="*voltcore.*"/> -->
                    <!--pmsg is the protobuf-generated code for dragent-->
                    <exclude name="*pmsg.*"/>
                    <exclude name="*exampleutils.*"/>
                </fileset>
            </classfiles>
            <sourcefiles encoding="UTF-8">
                <fileset dir="src/frontend">
                    <!-- <include name="voltdb/**/*.java"/> -->
                    <!-- <include name="voltcore/**/*.java"/> -->
                </fileset>
            </sourcefiles>
        </structure>
                            
        <html destdir="report"/>
                            
    </jacoco:report>
</target>
</project>
